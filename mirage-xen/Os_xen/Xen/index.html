<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Xen (mirage-xen.Os_xen.Xen)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">mirage-xen</a> &#x00BB; <a href="../index.html">Os_xen</a> &#x00BB; Xen</nav><h1>Module <code>Os_xen.Xen</code></h1><nav class="toc"><ul><li><a href="#grants">Grants</a></li><li><a href="#receiving-foreign-pages">Receiving foreign pages</a></li><li><a href="#offering-pages-to-foreign-domains">Offering pages to foreign domains</a></li></ul></nav></header><aside><p>Some more Xen-specific that is neither part of scheduling nor startup info, and not tied to xenstore either.</p></aside><dl><dt class="spec value" id="val-virt_to_mfn"><a href="#val-virt_to_mfn" class="anchor"></a><code><span class="keyword">val</span> virt_to_mfn : nativeint <span>&#45;&gt;</span> nativeint</code></dt><dd><p>Convert a Xen virtual addr <code>&quot;va&quot;</code> to <code>MFN</code></p><ul><li>This is a binding to Xen mini-os <code>virt_to_mfn()</code>;</li><li>The inverse function in minios is <code>__mfn_to_virt</code>.</li><li>example use: <code>OS.MM.virt_to_mfn (Io_page.get_addr your_io_page_t)</code></li><li>see https://xenbits.xen.org/docs/xtf/mm_8h_source.html and https://wiki.xenproject.org/wiki/XenTerminology</li></ul></dd></dl><section><header><h3 id="grants"><a href="#grants" class="anchor"></a>Grants</h3></header><aside><p>Allow a local xen domain to read/write memory exported (&quot;granted&quot;) from foreign domains. Safe memory sharing is a building block of all xen inter-domain communication protocols such as those for virtual network and disk devices.</p><p>Foreign domains will explicitly &quot;grant&quot; us access to certain memory regions such as disk buffers. These regions are uniquely identified by the pair of (foreign domain id, integer reference) which is passed to us over some existing channel (typically via xenstore keys or via structures in previously-shared memory region).</p></aside><div class="spec module" id="module-Gntref"><a href="#module-Gntref" class="anchor"></a><code><span class="keyword">module</span> <a href="Gntref/index.html">Gntref</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="receiving-foreign-pages"><a href="#receiving-foreign-pages" class="anchor"></a>Receiving foreign pages</h3></header><div class="spec module" id="module-Import"><a href="#module-Import" class="anchor"></a><code><span class="keyword">module</span> <a href="Import/index.html">Import</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h3 id="offering-pages-to-foreign-domains"><a href="#offering-pages-to-foreign-domains" class="anchor"></a>Offering pages to foreign domains</h3></header><div class="spec module" id="module-Export"><a href="#module-Export" class="anchor"></a><code><span class="keyword">module</span> <a href="Export/index.html">Export</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-console"><a href="#val-console" class="anchor"></a><code><span class="keyword">val</span> console : <a href="Gntref/index.html#type-t">Gntref.t</a></code></dt><dd><p>In xen-4.2 and later, the domain builder will allocate one of the reserved grant table entries and use it to pre-authorise the console backend domain.</p></dd></dl><dl><dt class="spec value" id="val-xenstore"><a href="#val-xenstore" class="anchor"></a><code><span class="keyword">val</span> xenstore : <a href="Gntref/index.html#type-t">Gntref.t</a></code></dt><dd><p>In xen-4.2 and later, the domain builder will allocate one of the reserved grant table entries and use it to pre-authorise the xenstore backend domain.</p></dd></dl></section></div></body></html>